  <!--簡単なやり方だとInvalidPipeArgument: '[object Object]' for pipe 'AsyncPipe'というエラーで'| async'をつけない…-->
    <!--簡単なやり方だとなぜか*ngIf="post.uid=''"が使えない…-->
<!--コンテンツヘッダーを挿入-->
<app-contents-header></app-contents-header>
<!--コンテンツヘッダーのクラス"contents-container"の定義はすべてcontents-header.cssにある-->

<div class="myContainerMain">
      <h1>{{ title }}</h1>

    ご質問、ご意見はこちらでご自由にどうぞ。わたしでお答えできることはお答えしますし、分からない・答えられない事などはそのように返答いたします。
    パキシルなどSSRIの離脱で苦労なさっている方もいますが、わたしはベンゾジアゼピンのことしかわかりません。
    以下の利用規約をかならずご覧の上ご利用なさってください。
    <ul>
      <li>
        完全匿名性とします。そして同一のニックネームをお使いください（複数ニックネームを使用して別人を演じても認証作業によって同一人物とわかるようになっています）
      </li>
      <li>
        宣伝、勧誘、商用サイトへのリンク、また反精神医療・薬物療法否定を訴える投稿は削除いたします。
      </li>
      <li>
        ここで投稿された情報の利用に関し当サイトは一切の責任を放棄します。必ず自己責任で判断してください。
      </li>
      <li>
        薬事法違反になるため個人的な服薬指示・減薬指導にはお答えできません。事例やわたしのアイデアを紹介してもあくまで参考です。<strong>必ず自己責任で判断してください</strong>。
      </li>
    </ul>
</div>
  <br>
<mat-card class="introduction-card">
  <mat-card-content>
  <div style="display:inline-block; width: 90%" *ngFor="let post of posts | async">
      <div *ngIf="post.uid !== 'IvUOuDzmWNTBuicD0XhsQqzfAFY2'">
        <div class="user-box pre-wrap">
        <p>名前：{{ post.userName }}</p>
        <p [innerHTML]="post.message | safe: 'html'"></p> <!--safe.pipe効かない…？？？-->
        <p style="text-align:right; font-size: smaller">投稿No.{{ post.id }}</p>
        <p style="text-align:right; font-size: smaller">投稿日時：{{ post.created }}</p>
        <p style="text-align:right; font-size: smaller; visibility:hidden">UID: {{post.uid}}</p> <!--visiblity:hiddenを外せば表示される-->
            <div *ngIf="(user | async) || {} as user">
              <p *ngIf="user.uid == 'IvUOuDzmWNTBuicD0XhsQqzfAFY2'">
                  <button mat-raised-button (click)="openDialog(post)">編集</button>
              </p>
            </div>
        </div>
      </div>
      <div *ngIf="post.uid == 'IvUOuDzmWNTBuicD0XhsQqzfAFY2'">
          <div class="admin-box pre-wrap">
          <p>名前：{{ post.userName }}</p>
          <p [innerHTML]="post.message | safe: 'html'"></p> <!--safe.pipe効かない…？？？-->
          <p style="text-align:right; font-size: smaller">投稿No.{{ post.id }}</p>
          <p style="text-align:right; font-size: smaller">投稿日時：{{ post.created }}</p>
          <p style="text-align:right; font-size: smaller; visibility:hidden">UID: {{post.uid}}</p>
            <div *ngIf="(user | async) || {} as user">
              <p *ngIf="user.uid == 'IvUOuDzmWNTBuicD0XhsQqzfAFY2'">
                  <button mat-raised-button (click)="openDialog(post)">編集</button>
              </p>
            </div>
          </div>
        </div>
      <br>
  </div>
  
<div *ngIf="(user | async) || {} as user">  
  <div *ngIf="user.uid; else notLoggedIn" class="post-box">
     <form #f="ngForm" (ngSubmit)="addPost()" name="form">       
        <mat-form-field>
               <mat-label>名前</mat-label>
                 <input matInput placeholder="ハンドルネーム" name="userName" required [(ngModel)]="userName">
       </mat-form-field>
       <br>
       <mat-form-field>
               <mat-label>コメント</mat-label>
                 <textarea class="textarea" matInput cdkTextareaAutosize cdkAutosizeMaxRows="100" cdkAutosizeMinRows="10" width="100%" placeholder="コメント" name="message" required [(ngModel)]="message"></textarea>
       </mat-form-field>
            <button type="submit" mat-flat-button color="accent" [disabled]="!f.form.valid">投稿</button>
    </form>
    <p>投稿が終わったらログアウトボタンをクリックしてログアウトしてください<img src="../../../assets/images/pointer.png"></p>
      <button mat-flat-button color="warn" (click)="logout()">ログアウト</button>
  </div>
  <ng-template #notLoggedIn>
      <!-- 認証されていない場合 -->
    <div class="post-box">
      <p style="margin: 0 auto;">書き込みする場合はサインイン（認証作業）してください。下の白いボタン[Continue as guest]を
      ワンクリックするだけで投稿可能となります。</p>
      <firebase-ui>
          (signInSuccessWithAuthResult)="successCallback($event)"
          (signInFailure)="errorCallback($event)">
      </firebase-ui>
    </div>
  </ng-template>
</div>
</mat-card-content>
</mat-card>

<br><br><hr><br>

<mat-card class="introduction-card">
    <mat-card-header>
      <div mat-card-avatar class="introduction-header-image"></div>
      <mat-card-title>投稿方法</mat-card-title>
      <mat-card-subtitle>とても簡単な作業ですが投稿に必要なサインインの作業方法を説明します。
        この作業は<strong>スパム投稿の防止と管理人の承認作業の省略</strong>のために導入しました。<br>
      </mat-card-subtitle>
    </mat-card-header>
    <mat-card-content style="font-size:medium">
    <ul>
      <li>
        基本的にはContinue as guestという白いボタンをクリックするだけで投稿可能になります。何も入力する必要はありません。
        ゲスト認証と呼ばれます。
        <br><img src='../../../assets/images/Forum_button2.png' width="200px"><br>
        クリック後、以下のように投稿入力フォームが出現しますのでそのまま投稿してください。<br>
        <br><img src='../../../assets/images/Forum_email3.png' width="400px">
        <br>入力し[投稿]ボタンをクリックですぐに反映されます。終りましたら赤い[ログアウト]ボタンをクリックしてログアウト。
        <br><br>【おわり】
        <br><br><br><br>
      </li>
<!--       
      <li>
          赤いSign in with Emailボタンはメールアドレスとパスワードで認証する方法です。本認証となります。メールアドレスが表示されることはありません。
          <br><img src='../../../assets/images/Forum_button1.png' width="200px"><br><br>
      </li>
      <li>
        このような小さな画面が開きますので、あなたのメールアドレスを入力。<br><img src='../../../assets/images/Forum_email1.png' width="300px">
        <br><br>
      </li>
      <li>
        NEXTボタンをクリックすると、パスワードの入力を求められます。最低6桁で英語と数字を含んだ任意のパスワードを入力。<br><img src='../../../assets/images/Forum_email2.png' width="300px">
        <br><br>
      </li>
      <li>
        SING INボタンをクリックすれば、投稿入力フォームが出現しますのでそのまま投稿してください。おわったら赤いログアウトボタンをクリックしてログアウト。
        <br><img src='../../../assets/images/Forum_email3.png' width="400px">
        <br><br>【おわり】
        <br><br><br><br>
      </li>
      <li>
        ゲスト認証と本認証に今のところ差はありませんので簡素なゲスト認証でかまいません。後に新しい機能追加の際その恩恵を受けたい場合、改めて本認証でログインすれば良いです。
        （更新のお知らせメール配信機能など）  
          <br><br>
        </li>
-->
    </ul>
</mat-card-content>
</mat-card>







  <br />
  <br />